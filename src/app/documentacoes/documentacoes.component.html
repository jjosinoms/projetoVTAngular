<div class="documentation-container">
  <div class="header">
    <h1 class="mat-headline-4">Documentações Técnicas</h1>

    <div class="search-filter">
      <mat-form-field appearance="outline">
        <mat-label>Buscar Documentação</mat-label>
        <input matInput placeholder="Digite para buscar" [(ngModel)]="searchTerm" (input)="applyFilter()">
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Filtrar por Modelo</mat-label>
        <mat-select [(value)]="selectedModel" (selectionChange)="applyFilter()">
          <mat-option value="all">Todos os Modelos</mat-option>
          <mat-option *ngFor="let model of availableModels" [value]="model">
            {{ model }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>

  <div class="documentation-grid">
    <mat-card *ngFor="let doc of filteredDocs" class="doc-card">
      <mat-card-header>
        <mat-icon mat-card-avatar>description</mat-icon>
        <mat-card-title>{{ doc.title }}</mat-card-title>
        <mat-card-subtitle>{{ doc.model }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <p>{{ doc.description }}</p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button color="primary" (click)="openDialog(doc)">
          <mat-icon>visibility</mat-icon> Ver Detalhes
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

  <!-- Modal de Detalhe -->
  <ng-template #documentacaoDetalheDialog>
    <div class="dialog-content">
      <h2>{{ selectedDoc?.title }}</h2>
      <h3>{{ selectedDoc?.model }}</h3>
      <p>{{ selectedDoc?.description }}</p>
  
      <div class="pdf-container">
        <iframe 
        *ngIf="safePdfUrl" 
        [src]="safePdfUrl" 
        width="100%" 
        height="500px" 
        style="border: none;">
      </iframe>
      </div>
    </div>
    
    <mat-dialog-actions>
      <button mat-button mat-dialog-close>Fechar</button>
      <a mat-button [href]="pdfUrl" target="_blank" color="primary">
        Abrir em nova guia
      </a>
    </mat-dialog-actions>
  </ng-template>

</div>
